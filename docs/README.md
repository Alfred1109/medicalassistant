# 智能康复助手系统

## 项目介绍

Medical Rehabilitation Assistant是一个医疗康复辅助系统，旨在帮助医生、健康管理师和患者进行康复过程管理。系统支持用户管理、康复计划制定、健康记录追踪、设备数据分析和智能代理辅助等功能。

## 文档目录

本文档目录包含项目开发和架构相关的核心文档：

- [项目架构说明](./structure.md)：详细描述系统架构和功能模块
- [开发计划](./develop.md)：系统开发阶段规划和重构计划
- [项目进度](../milestone.md)：当前开发进度和里程碑

## 项目架构

本项目采用分层架构设计：

- **API层**：处理HTTP请求和响应
- **服务层**：实现业务逻辑
- **数据访问层**：与数据库交互
- **模型层**：定义数据结构
- **前端界面层**：用户交互界面
- **智能代理层**：AI辅助功能

## 重构工作总结

项目重构主要关注以下几个方面：

### 1. 统一异常处理

- 创建了统一的异常类体系（`app/core/exceptions.py`）
- 定义了多种业务异常类型
- 在FastAPI应用中注册了全局异常处理器

### 2. 通用工具函数

- 创建了工具函数模块（`app/core/utils.py`）
- 提供文档转换、对象处理等通用函数
- 统一了命名风格转换（蛇形/驼峰）

### 3. 缓存机制

- 实现了内存缓存系统（`app/core/cache.py`）
- 提供缓存装饰器，支持同步和异步函数
- 支持缓存失效和模式匹配删除

### 4. 统一响应格式

- 创建了标准响应模型（`app/schemas/common.py`）
- 支持成功和错误响应的统一格式
- 实现了分页响应模型

### 5. 配置管理

- 增强了配置系统（`app/core/config.py`）
- 添加环境变量支持
- 提供辅助函数判断环境类型

### 6. 日志系统

- 优化了日志配置（`app/core/logging.py`）
- 支持不同日志级别和格式
- 实现了轮转日志文件

### 7. 数据库连接

- 增强了数据库连接管理（`app/db/mongodb.py`）
- 添加连接池配置
- 提供连接健康检查

### 8. CRUD服务优化

- 重构了CRUD服务类（`app/db/crud_services.py`）
- 优化了继承结构，减少代码冗余
- 统一了异常处理

## 前端功能增强

前端部分主要完成了以下增强：

1. **统一UI风格**：采用Material UI 5实现了现代化界面
2. **响应式设计**：支持不同设备屏幕大小
3. **状态管理优化**：使用Redux Toolkit实现全局状态管理
4. **路由系统**：基于角色的路由访问控制
5. **数据可视化**：实现了健康数据的图表展示

## 核心功能模块

系统包含以下核心功能模块：

1. **用户管理**：医生、健管师、患者账户管理
2. **健康档案**：患者健康信息记录与管理
3. **康复计划**：智能康复计划生成与管理
4. **随访管理**：患者随访计划与执行记录
5. **数据监测**：健康数据异常监测与预警
6. **智能问答**：基于AI的专业医疗咨询
7. **设备管理**：康复设备接入与数据采集

## 技术栈

- **后端框架**：FastAPI
- **数据库**：MongoDB
- **前端框架**：React 18
- **UI库**：Material UI 5
- **状态管理**：Redux Toolkit
- **认证**：JWT
- **缓存**：Redis
- **AI集成**：OpenAI和Anthropic API
- **服务器**：Uvicorn

## 开发环境设置

1. **克隆仓库**
   ```bash
   git clone <repository-url>
   cd patientmanager
   ```

2. **启动项目**
   ```bash
   ./start-project.sh
   ```

3. **停止项目**
   ```bash
   ./stop-project.sh
   ```

## 下一步工作

1. **测试覆盖率提升**：编写单元测试和集成测试
2. **API文档生成**：使用OpenAPI规范生成API文档
3. **性能优化**：数据库查询优化、批量操作优化
4. **安全增强**：添加更多安全检查和防护措施
5. **小程序开发**：推进小程序版本实现
6. **设备接入能力**：完善设备接入标准和管理 